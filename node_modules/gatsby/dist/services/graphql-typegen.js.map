{"version":3,"file":"graphql-typegen.js","names":["graphQLTypegen","program","store","parentSpan","reporter","Error","directory","activity","activityTimer","start","schema","definitions","getState","writeGraphQLSchema","writeGraphQLFragments","writeTypeScriptTypes","err","panicOnBuild","id","context","sourceMessage","end"],"sources":["../../src/services/graphql-typegen.ts"],"sourcesContent":["import { IBuildContext } from \"../internal\"\nimport {\n  writeGraphQLFragments,\n  writeGraphQLSchema,\n} from \"../utils/graphql-typegen/file-writes\"\nimport { writeTypeScriptTypes } from \"../utils/graphql-typegen/ts-codegen\"\n\nexport async function graphQLTypegen({\n  program,\n  store,\n  parentSpan,\n  reporter,\n}: IBuildContext): Promise<void> {\n  // TypeScript requires null/undefined checks for these\n  // But this should never happen unless e.g. the state machine doesn't receive this information from a parent state machine\n  if (!program || !store || !reporter) {\n    throw new Error(\n      `Missing required params in graphQLTypegen. program: ${!!program}. store: ${!!store}.`\n    )\n  }\n  const directory = program.directory\n\n  const activity = reporter.activityTimer(\n    `Generating GraphQL and TypeScript types`,\n    {\n      parentSpan,\n    }\n  )\n  activity.start()\n\n  const { schema, definitions } = store.getState()\n\n  try {\n    await writeGraphQLSchema(directory, schema)\n    await writeGraphQLFragments(directory, definitions)\n    await writeTypeScriptTypes(directory, schema, definitions)\n  } catch (err) {\n    activity.panicOnBuild({\n      id: `12100`,\n      context: {\n        sourceMessage: err,\n      },\n    })\n  }\n\n  activity.end()\n}\n"],"mappings":";;;;;AACA;;AAIA;;AAEO,eAAeA,cAAf,CAA8B;EACnCC,OADmC;EAEnCC,KAFmC;EAGnCC,UAHmC;EAInCC;AAJmC,CAA9B,EAK0B;EAC/B;EACA;EACA,IAAI,CAACH,OAAD,IAAY,CAACC,KAAb,IAAsB,CAACE,QAA3B,EAAqC;IACnC,MAAM,IAAIC,KAAJ,CACH,uDAAsD,CAAC,CAACJ,OAAQ,YAAW,CAAC,CAACC,KAAM,GADhF,CAAN;EAGD;;EACD,MAAMI,SAAS,GAAGL,OAAO,CAACK,SAA1B;EAEA,MAAMC,QAAQ,GAAGH,QAAQ,CAACI,aAAT,CACd,yCADc,EAEf;IACEL;EADF,CAFe,CAAjB;EAMAI,QAAQ,CAACE,KAAT;EAEA,MAAM;IAAEC,MAAF;IAAUC;EAAV,IAA0BT,KAAK,CAACU,QAAN,EAAhC;;EAEA,IAAI;IACF,MAAM,IAAAC,8BAAA,EAAmBP,SAAnB,EAA8BI,MAA9B,CAAN;IACA,MAAM,IAAAI,iCAAA,EAAsBR,SAAtB,EAAiCK,WAAjC,CAAN;IACA,MAAM,IAAAI,+BAAA,EAAqBT,SAArB,EAAgCI,MAAhC,EAAwCC,WAAxC,CAAN;EACD,CAJD,CAIE,OAAOK,GAAP,EAAY;IACZT,QAAQ,CAACU,YAAT,CAAsB;MACpBC,EAAE,EAAG,OADe;MAEpBC,OAAO,EAAE;QACPC,aAAa,EAAEJ;MADR;IAFW,CAAtB;EAMD;;EAEDT,QAAQ,CAACc,GAAT;AACD"}