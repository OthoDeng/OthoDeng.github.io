{"version":3,"file":"image-nodes.js","names":["imageNodes","state","nodeMetaByUrl","reducers","setState","payload","pushNodeMeta","id","sourceUrl","modifiedGmt","nodeUrl","stripImageSizesFromUrl"],"sources":["../../src/models/image-nodes.js"],"sourcesContent":["import { stripImageSizesFromUrl } from \"~/steps/source-nodes/fetch-nodes/fetch-referenced-media-items\"\n\nconst imageNodes = {\n  state: {\n    nodeMetaByUrl: {},\n  },\n\n  reducers: {\n    setState(state, payload) {\n      state = {\n        ...state,\n        ...payload,\n      }\n\n      return state\n    },\n\n    pushNodeMeta(state, { id, sourceUrl, modifiedGmt }) {\n      const nodeUrl = stripImageSizesFromUrl(sourceUrl)\n      // don't overwrite the lookup table in case we have multiple\n      // sized urls for the same image\n      if (!state.nodeMetaByUrl[nodeUrl]) {\n        state.nodeMetaByUrl[nodeUrl] = {\n          id,\n          modifiedGmt,\n        }\n      }\n\n      return state\n    },\n  },\n}\n\nexport default imageNodes\n"],"mappings":";;;;AAAA;AAEA,MAAMA,UAAU,GAAG;EACjBC,KAAK,EAAE;IACLC,aAAa,EAAE,CAAC;EAClB,CAAC;EAEDC,QAAQ,EAAE;IACRC,QAAQ,CAACH,KAAK,EAAEI,OAAO,EAAE;MACvBJ,KAAK,GAAG;QACN,GAAGA,KAAK;QACR,GAAGI;MACL,CAAC;MAED,OAAOJ,KAAK;IACd,CAAC;IAEDK,YAAY,CAACL,KAAK,EAAE;MAAEM,EAAE;MAAEC,SAAS;MAAEC;IAAY,CAAC,EAAE;MAClD,MAAMC,OAAO,GAAG,IAAAC,iDAAsB,EAACH,SAAS,CAAC;MACjD;MACA;MACA,IAAI,CAACP,KAAK,CAACC,aAAa,CAACQ,OAAO,CAAC,EAAE;QACjCT,KAAK,CAACC,aAAa,CAACQ,OAAO,CAAC,GAAG;UAC7BH,EAAE;UACFE;QACF,CAAC;MACH;MAEA,OAAOR,KAAK;IACd;EACF;AACF,CAAC;AAAA,eAEcD,UAAU;AAAA"}