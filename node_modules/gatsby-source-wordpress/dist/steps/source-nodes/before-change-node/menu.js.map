{"version":3,"file":"menu.js","names":["deleteMenuNodeChildMenuItems","node","pluginOptions","helpers","getNodesByType","actions","getGatsbyApi","allMenuItems","schema","typePrefix","allMenuItemsNodesWithThisMenuIdAsAParent","filter","menuItemNode","menu","id","deleteNode","menuBeforeChangeNode","api","remoteNode","actionType"],"sources":["../../../../src/steps/source-nodes/before-change-node/menu.js"],"sourcesContent":["import { getGatsbyApi } from \"~/utils/get-gatsby-api\"\n\nconst deleteMenuNodeChildMenuItems = node => {\n  const {\n    pluginOptions,\n    helpers: { getNodesByType, actions },\n  } = getGatsbyApi()\n\n  const allMenuItems = getNodesByType(\n    `${pluginOptions.schema.typePrefix}MenuItem`\n  )\n\n  const allMenuItemsNodesWithThisMenuIdAsAParent = allMenuItems.filter(\n    menuItemNode => menuItemNode.menu.node.id === node.id\n  )\n\n  for (const menuItemNode of allMenuItemsNodesWithThisMenuIdAsAParent) {\n    actions.deleteNode(menuItemNode)\n  }\n}\n\nexport const menuBeforeChangeNode = async api => {\n  if (api.remoteNode && api.actionType === `DELETE`) {\n    // delete child menu items\n    return deleteMenuNodeChildMenuItems(api.remoteNode)\n  }\n\n  return null\n}\n"],"mappings":";;;;AAAA;AAEA,MAAMA,4BAA4B,GAAGC,IAAI,IAAI;EAC3C,MAAM;IACJC,aAAa;IACbC,OAAO,EAAE;MAAEC,cAAc;MAAEC;IAAQ;EACrC,CAAC,GAAG,IAAAC,0BAAY,GAAE;EAElB,MAAMC,YAAY,GAAGH,cAAc,CAChC,GAAEF,aAAa,CAACM,MAAM,CAACC,UAAW,UAAS,CAC7C;EAED,MAAMC,wCAAwC,GAAGH,YAAY,CAACI,MAAM,CAClEC,YAAY,IAAIA,YAAY,CAACC,IAAI,CAACZ,IAAI,CAACa,EAAE,KAAKb,IAAI,CAACa,EAAE,CACtD;EAED,KAAK,MAAMF,YAAY,IAAIF,wCAAwC,EAAE;IACnEL,OAAO,CAACU,UAAU,CAACH,YAAY,CAAC;EAClC;AACF,CAAC;AAEM,MAAMI,oBAAoB,GAAG,MAAMC,GAAG,IAAI;EAC/C,IAAIA,GAAG,CAACC,UAAU,IAAID,GAAG,CAACE,UAAU,KAAM,QAAO,EAAE;IACjD;IACA,OAAOnB,4BAA4B,CAACiB,GAAG,CAACC,UAAU,CAAC;EACrD;EAEA,OAAO,IAAI;AACb,CAAC;AAAA"}