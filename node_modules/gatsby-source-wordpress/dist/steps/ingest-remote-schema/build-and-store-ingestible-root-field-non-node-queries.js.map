{"version":3,"file":"build-and-store-ingestible-root-field-non-node-queries.js","names":["buildNonNodeQueries","remoteSchema","ingestibles","nonNodeRootFields","store","getState","fragments","transformedFields","recursivelyTransformFields","fields","parentType","name","type","selectionSet","buildSelectionSet","builtFragments","generateReusableFragments","nonNodeQuery","dispatch","setState"],"sources":["../../../src/steps/ingest-remote-schema/build-and-store-ingestible-root-field-non-node-queries.js"],"sourcesContent":["import store from \"~/store\"\nimport recursivelyTransformFields from \"~/steps/ingest-remote-schema/build-queries-from-introspection/recursively-transform-fields\"\nimport { buildSelectionSet } from \"~/steps/ingest-remote-schema/build-queries-from-introspection/build-query-on-field-name\"\nimport { generateReusableFragments } from \"./build-queries-from-introspection/build-query-on-field-name\"\n\nconst buildNonNodeQueries = async () => {\n  const {\n    remoteSchema: {\n      ingestibles: { nonNodeRootFields },\n    },\n  } = store.getState()\n\n  const fragments = {}\n\n  // recursively transform fields\n  const transformedFields = recursivelyTransformFields({\n    fields: nonNodeRootFields,\n    parentType: {\n      name: `RootQuery`,\n      type: `OBJECT`,\n    },\n    fragments,\n  })\n\n  const selectionSet = buildSelectionSet(transformedFields)\n\n  const builtFragments = generateReusableFragments({\n    fragments,\n    selectionSet,\n  })\n\n  const nonNodeQuery = `\n      query NON_NODE_QUERY {\n        ${selectionSet}\n      }\n      ${builtFragments}\n  `\n\n  store.dispatch.remoteSchema.setState({ nonNodeQuery })\n}\n\nexport { buildNonNodeQueries }\n"],"mappings":";;;;;AAAA;AACA;AACA;AAGA,MAAMA,mBAAmB,GAAG,YAAY;EACtC,MAAM;IACJC,YAAY,EAAE;MACZC,WAAW,EAAE;QAAEC;MAAkB;IACnC;EACF,CAAC,GAAGC,cAAK,CAACC,QAAQ,EAAE;EAEpB,MAAMC,SAAS,GAAG,CAAC,CAAC;;EAEpB;EACA,MAAMC,iBAAiB,GAAG,IAAAC,mCAA0B,EAAC;IACnDC,MAAM,EAAEN,iBAAiB;IACzBO,UAAU,EAAE;MACVC,IAAI,EAAG,WAAU;MACjBC,IAAI,EAAG;IACT,CAAC;IACDN;EACF,CAAC,CAAC;EAEF,MAAMO,YAAY,GAAG,IAAAC,wCAAiB,EAACP,iBAAiB,CAAC;EAEzD,MAAMQ,cAAc,GAAG,IAAAC,gDAAyB,EAAC;IAC/CV,SAAS;IACTO;EACF,CAAC,CAAC;EAEF,MAAMI,YAAY,GAAI;AACxB;AACA,UAAUJ,YAAa;AACvB;AACA,QAAQE,cAAe;AACvB,GAAG;EAEDX,cAAK,CAACc,QAAQ,CAACjB,YAAY,CAACkB,QAAQ,CAAC;IAAEF;EAAa,CAAC,CAAC;AACxD,CAAC;AAAA"}