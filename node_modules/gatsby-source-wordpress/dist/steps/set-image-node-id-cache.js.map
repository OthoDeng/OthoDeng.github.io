{"version":3,"file":"set-image-node-id-cache.js","names":["setImageNodeIdCache","state","store","getState","imageNodes","nodeMetaByUrl","setPersistentCache","key","value"],"sources":["../../src/steps/set-image-node-id-cache.ts"],"sourcesContent":["import store from \"~/store\"\nimport { setPersistentCache } from \"~/utils/cache\"\n\n// since we create image nodes in resolvers\n// we cache our image node id's on post build for production\n// and on create dev server for development\n// so we can touch our image nodes in both develop and build\n// so they don't get garbage collected by Gatsby\nconst setImageNodeIdCache = async (): Promise<void> => {\n  const state = store.getState()\n  const { imageNodes } = state\n\n  if (imageNodes.nodeMetaByUrl) {\n    await setPersistentCache({\n      key: `image-node-meta-by-url`,\n      value: imageNodes.nodeMetaByUrl,\n    })\n  }\n}\n\nexport { setImageNodeIdCache }\n"],"mappings":";;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA,MAAMA,mBAAmB,GAAG,YAA2B;EACrD,MAAMC,KAAK,GAAGC,cAAK,CAACC,QAAQ,EAAE;EAC9B,MAAM;IAAEC;EAAW,CAAC,GAAGH,KAAK;EAE5B,IAAIG,UAAU,CAACC,aAAa,EAAE;IAC5B,MAAM,IAAAC,yBAAkB,EAAC;MACvBC,GAAG,EAAG,wBAAuB;MAC7BC,KAAK,EAAEJ,UAAU,CAACC;IACpB,CAAC,CAAC;EACJ;AACF,CAAC;AAAA"}