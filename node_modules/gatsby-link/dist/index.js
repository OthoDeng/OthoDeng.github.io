var e=require("prop-types"),t=require("react"),n=require("@gatsbyjs/reach-router"),r=require("@gatsbyjs/reach-router/lib/utils"),o=require("gatsby-page-utils/apply-trailing-slash-option");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=/*#__PURE__*/a(e),s=/*#__PURE__*/a(t);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){var t=e||"/",n="",r="",o=t.indexOf("#");-1!==o&&(r=t.slice(o),t=t.slice(0,o));var a=t.indexOf("?");return-1!==a&&(n=t.slice(a),t=t.slice(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}var p=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,f=function(e){if("string"==typeof e)return!function(e){return p.test(e)}(e)},h=function(){return"production"!==process.env.NODE_ENV?"undefined"!=typeof __PATH_PREFIX__?__PATH_PREFIX__:void 0:__PATH_PREFIX__};function d(e,t){var n,r;if(void 0===t&&(t="production"!==process.env.NODE_ENV?"undefined"!=typeof __BASE_PATH__?__BASE_PATH__:void 0:__BASE_PATH__),!f(e))return e;if(e.startsWith("./")||e.startsWith("../"))return e;var o=null!=(n=null!=(r=t)?r:h())?n:"/";return""+(null!=o&&o.endsWith("/")?o.slice(0,-1):o)+(e.startsWith("/")?e:"/"+e)}var _=function(e){return null==e?void 0:e.startsWith("/")},v=function(){return"undefined"!=typeof __TRAILING_SLASH__?__TRAILING_SLASH__:void 0},y=function(e,t){if("number"==typeof e)return e;if(!f(e))return e;var n=u(e),a=n.pathname,i=n.search,s=n.hash,l=v(),c=e;return"always"!==l&&"never"!==l||(c=""+o.applyTrailingSlashOption(a,l)+i+s),_(c)?d(c):function(e,t){if(_(e))return e;var n=v(),a=r.resolve(e,t);return"always"===n||"never"===n?o.applyTrailingSlashOption(a,n):a}(c,t)},b=["to","getProps","onClick","onMouseEnter","activeClassName","activeStyle","innerRef","partiallyActive","state","replace","_location"],w={activeClassName:i.default.string,activeStyle:i.default.object,partiallyActive:i.default.bool};function P(e){/*#__PURE__*/return s.default.createElement(n.Location,null,function(t){/*#__PURE__*/return s.default.createElement(m,l({},e,{_location:t.location}))})}var m=/*#__PURE__*/function(e){var t,r;function o(t){var n;(n=e.call(this,t)||this).defaultGetProps=function(e){return(n.props.partiallyActive?e.isPartiallyCurrent:e.isCurrent)?{className:[n.props.className,n.props.activeClassName].filter(Boolean).join(" "),style:l({},n.props.style,n.props.activeStyle)}:null};var r=!1;return"undefined"!=typeof window&&window.IntersectionObserver&&(r=!0),n.state={IOSupported:r},n.abortPrefetch=null,n.handleRef=n.handleRef.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,c(t,r);var a=o.prototype;return a._prefetch=function(){var e=window.location.pathname+window.location.search;this.props._location&&this.props._location.pathname&&(e=this.props._location.pathname+this.props._location.search);var t=u(y(this.props.to,e)),n=t.pathname+t.search;if(e!==n)return ___loader.enqueue(n)},a.componentWillUnmount=function(){if(this.io){var e=this.io,t=e.instance,n=e.el;this.abortPrefetch&&this.abortPrefetch.abort(),t.unobserve(n),t.disconnect()}},a.handleRef=function(e){var t,n,r,o=this;this.props.innerRef&&Object.prototype.hasOwnProperty.call(this.props.innerRef,"current")?this.props.innerRef.current=e:this.props.innerRef&&this.props.innerRef(e),this.state.IOSupported&&e&&(this.io=(t=e,n=function(e){e?o.abortPrefetch=o._prefetch():o.abortPrefetch&&o.abortPrefetch.abort()},(r=new window.IntersectionObserver(function(e){e.forEach(function(e){t===e.target&&n(e.isIntersecting||e.intersectionRatio>0)})})).observe(t),{instance:r,el:t}))},a.render=function(){var e=this,t=this.props,r=t.to,o=t.getProps,a=void 0===o?this.defaultGetProps:o,i=t.onClick,c=t.onMouseEnter,p=t.state,h=t.replace,d=t._location,_=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}(t,b);"production"===process.env.NODE_ENV||f(r)||console.warn("External link "+r+" was detected in a Link component. Use the Link component only for internal links. See: https://gatsby.dev/internal-links");var v=y(r,d.pathname);return f(v)?/*#__PURE__*/s.default.createElement(n.Link,l({to:v,state:p,getProps:a,innerRef:this.handleRef,onMouseEnter:function(e){c&&c(e);var t=u(v);___loader.hovering(t.pathname+t.search)},onClick:function(t){if(i&&i(t),!(0!==t.button||e.props.target||t.defaultPrevented||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)){t.preventDefault();var n=h,r=encodeURI(v)===d.pathname;"boolean"!=typeof h&&r&&(n=!0),window.___navigate(v,{state:p,replace:n})}return!0}},_)):/*#__PURE__*/s.default.createElement("a",l({href:v},_))},o}(s.default.Component);m.propTypes=l({},w,{onClick:i.default.func,to:i.default.string.isRequired,replace:i.default.bool,state:i.default.object});var g=s.default.forwardRef(function(e,t){/*#__PURE__*/return s.default.createElement(P,l({innerRef:t},e))});exports.default=g,exports.navigate=function(e,t){window.___navigate(y(e,window.location.pathname),t)},exports.parsePath=u,exports.withAssetPrefix=function(e){return d(e,h())},exports.withPrefix=d;
//# sourceMappingURL=index.js.map
